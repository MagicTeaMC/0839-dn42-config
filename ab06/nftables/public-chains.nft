# vi: ft=nftables
# /etc/nftables/public-chains.nft

# Chains for WAN interfaces

chain input_public {
    tcp dport { https, ssh } accept
    ip6 daddr fe80::/64 udp dport dhcpv6-client accept
    meta l4proto { icmp, ipv6-icmp } accept
    reject with icmpx admin-prohibited
}

chain nat_post_public {
    iifname @lan_interfaces oifname @public_interfaces meta nfproto ipv4 masquerade
}
